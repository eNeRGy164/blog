---
import BaseHead from "@/components/BaseHead.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import Sidebar from "@/components/Sidebar.astro";
import { sortedPosts } from "@/js/util";

export interface Props { title: string; description: string; classes?: string[] | null ; mainEntry: boolean; }

const allPosts = sortedPosts(await Astro.glob('../posts/*.{md,mdx}'))

const { title, description, classes, mainEntry = false } = Astro.props;
---

<!doctype html>
<html lang="en-us">
  <head>
    <BaseHead title={title} description={description} />
  </head>
  <body
    class={classes ? classes.toString() : undefined}
    itemscope
    itemtype="http://schema.org/WebPage"
    id="body"
    itemref={mainEntry ? undefined : 'pagetitle'}
  >
    <meta itemprop="inLanguage" content="en-US" />
    <link itemprop="url" href={Astro.url.pathname} />
    <div class="skip-content"><a href="#content">Skip to content</a></div>
    <div id="wrapper">
      <Header mainEntry={mainEntry} />
      <slot />
      <Sidebar />
      <Footer posts={allPosts} />
    </div>
  </body>
</html>
