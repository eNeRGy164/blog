---
/**
 * FooterCategories
 * Footer category list derived from the posts collection.
 */
import { urlifyToken, getCategoryDisplayName } from "@/js/util.js";
import type { CollectionEntry } from "astro:content";

interface Props {
  posts: CollectionEntry<"posts">[];
}

const { posts } = Astro.props;

let categories = posts
  .flatMap((post) => post.data.categories)
  .filter((category): category is string => category != null)
  .map((category) => getCategoryDisplayName(category));

categories = Array.from(new Set<string>(categories))
  .sort((a, b) => a.localeCompare(b));
---

<nav>
	<h2>Categories</h2>
	<ul>
	{categories?.map((category: string) =>
		<li><a href={`/category/${urlifyToken(category)}/`} rel="nofollow category">{category}</a></li>
	)}
	</ul>
</nav>
