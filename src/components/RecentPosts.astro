---
import { sortedPosts } from "@/js/util.js";
import { getCollection } from "astro:content";

const unsortedPosts = await getCollection("posts");
const posts: { data: { permalink: string; title: string } }[] =
  sortedPosts(unsortedPosts);
---

<aside id="recent-posts">
  <h2>Recent Posts</h2>
  <div>
    <nav>
      <ol>
        {
          posts
            .slice(0, 6)
            .filter((p) => p.data.permalink !== Astro.url.pathname)
            .slice(0, 5)
            .map((post) => (
              <li>
                <a href={post.data.permalink} target="_self">
                  {post.data.title}
                </a>
              </li>
            ))
        }
      </ol>
    </nav>
  </div>
</aside>
