---
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import { SITE_TITLE, SITE_DESCRIPTION, PAGE_SIZE } from '../config.ts'
import { sortedPosts } from '@/js/util.js'
import WPArticleSummary from '@/components/WPArticleSummary.astro'
import { Debug } from 'astro:components'
import PageNav from '@/components/PageNav.astro'
// Use Astro.glob() to fetch all posts, and then sort them by date.
const posts = sortedPosts(await Astro.glob('../posts/*.{md,mdx}'))
const hasMorePosts = posts.length > PAGE_SIZE
---

<!DOCTYPE html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body class="home blog" itemprop="mainEntity" itemscope="" itemtype="http://schema.org/WebPage" id="body">
		<div class="skip-content"><a href="#content">Skip to content</a></div>
		<div id="wrapper">
			<Header title={SITE_TITLE} />
			<main id="content" itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Blog" itemref="publisher">
				<link itemprop="url" href="">
				{posts.slice(0, 5).map((post: any, _: Number) =>
					<WPArticleSummary page={post} articlePreview={true} />
				)}
				<PageNav posts={[...posts]} page="1" />
			</main>
			<Footer posts={[...posts]}/>
		</div>
	</body>
</html>
